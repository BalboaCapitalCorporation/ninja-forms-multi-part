!function(){var t,e,n;!function(i){function r(t,e){return E.call(t,e)}function o(t,e){var n,i,r,o,l,s,u,a,f,c,d,h=e&&e.split("/"),g=b.map,p=g&&g["*"]||{};if(t&&"."===t.charAt(0))if(e){for(t=t.split("/"),l=t.length-1,b.nodeIdCompat&&C.test(t[l])&&(t[l]=t[l].replace(C,"")),t=h.slice(0,h.length-1).concat(t),f=0;f<t.length;f+=1)if(d=t[f],"."===d)t.splice(f,1),f-=1;else if(".."===d){if(1===f&&(".."===t[2]||".."===t[0]))break;f>0&&(t.splice(f-1,2),f-=2)}t=t.join("/")}else 0===t.indexOf("./")&&(t=t.substring(2));if((h||p)&&g){for(n=t.split("/"),f=n.length;f>0;f-=1){if(i=n.slice(0,f).join("/"),h)for(c=h.length;c>0;c-=1)if(r=g[h.slice(0,c).join("/")],r&&(r=r[i])){o=r,s=f;break}if(o)break;!u&&p&&p[i]&&(u=p[i],a=f)}!o&&u&&(o=u,s=a),o&&(n.splice(0,s,o),t=n.join("/"))}return t}function l(t,e){return function(){var n=x.call(arguments,0);return"string"!=typeof n[0]&&1===n.length&&n.push(null),h.apply(i,n.concat([t,e]))}}function s(t){return function(e){return o(e,t)}}function u(t){return function(e){m[t]=e}}function a(t){if(r(v,t)){var e=v[t];delete v[t],w[t]=!0,d.apply(i,e)}if(!r(m,t)&&!r(w,t))throw new Error("No "+t);return m[t]}function f(t){var e,n=t?t.indexOf("!"):-1;return n>-1&&(e=t.substring(0,n),t=t.substring(n+1,t.length)),[e,t]}function c(t){return function(){return b&&b.config&&b.config[t]||{}}}var d,h,g,p,m={},v={},b={},w={},E=Object.prototype.hasOwnProperty,x=[].slice,C=/\.js$/;g=function(t,e){var n,i=f(t),r=i[0];return t=i[1],r&&(r=o(r,e),n=a(r)),r?t=n&&n.normalize?n.normalize(t,s(e)):o(t,e):(t=o(t,e),i=f(t),r=i[0],t=i[1],r&&(n=a(r))),{f:r?r+"!"+t:t,n:t,pr:r,p:n}},p={require:function(t){return l(t)},exports:function(t){var e=m[t];return"undefined"!=typeof e?e:m[t]={}},module:function(t){return{id:t,uri:"",exports:m[t],config:c(t)}}},d=function(t,e,n,o){var s,f,c,d,h,b,E=[],x=typeof n;if(o=o||t,"undefined"===x||"function"===x){for(e=!e.length&&n.length?["require","exports","module"]:e,h=0;h<e.length;h+=1)if(d=g(e[h],o),f=d.f,"require"===f)E[h]=p.require(t);else if("exports"===f)E[h]=p.exports(t),b=!0;else if("module"===f)s=E[h]=p.module(t);else if(r(m,f)||r(v,f)||r(w,f))E[h]=a(f);else{if(!d.p)throw new Error(t+" missing "+f);d.p.load(d.n,l(o,!0),u(f),{}),E[h]=m[f]}c=n?n.apply(m[t],E):void 0,t&&(s&&s.exports!==i&&s.exports!==m[t]?m[t]=s.exports:c===i&&b||(m[t]=c))}else t&&(m[t]=n)},t=e=h=function(t,e,n,r,o){if("string"==typeof t)return p[t]?p[t](e):a(g(t,e).f);if(!t.splice){if(b=t,b.deps&&h(b.deps,b.callback),!e)return;e.splice?(t=e,e=n,n=null):t=i}return e=e||function(){},"function"==typeof n&&(n=r,r=o),r?d(i,t,e,n):setTimeout(function(){d(i,t,e,n)},4),h},h.config=function(t){return h(t)},t._defined=m,n=function(t,e,n){if("string"!=typeof t)throw new Error("See almond README: incorrect module build, no module name");e.splice||(n=e,e=[]),r(m,t)||r(v,t)||(v[t]=[t,e,n])},n.amd={jQuery:!0}}(),n("../lib/almond",function(){}),n("views/gutterLeft",[],function(){var t=Marionette.ItemView.extend({tagName:"div",template:"#nf-tmpl-mp-gutter-left"});return t}),n("views/gutterRight",[],function(){var t=Marionette.ItemView.extend({tagName:"div",template:"#nf-tmpl-mp-gutter-right"});return t}),n("models/partModel",[],function(){var t=Backbone.Model.extend({initialize:function(){var t=i.channel("formContent").request("get:loadFilters"),e=_.without(t,void 0),n=e[1];this.set("formContentData",n(this.get("formContentData")))}});return t}),n("models/partCollection",["models/partModel"],function(t){var e=Backbone.Collection.extend({model:t,currentElement:!1,initialize:function(t,e){},getElement:function(){return this.currentElement||this.setElement(this.at(0),!0),this.currentElement},setElement:function(t,e){e=e||!1,(e||!this.partErrors())&&(this.currentElement=t,e||this.trigger("change:part",this))},next:function(){return this.getVisibleParts().length-1!=this.getVisibleParts().indexOf(this.getElement())&&this.setElement(this.getVisibleParts()[this.getVisibleParts().indexOf(this.getElement())+1]),this},previous:function(){return 0!=this.getVisibleParts().indexOf(this.getElement())&&this.setElement(this.getVisibleParts()[this.getVisibleParts().indexOf(this.getElement())-1]),this},partErrors:function(){return this.currentElement.get("validate")?(this.currentElement.validateFields(),this.currentElement.get("errors")):!1},validateFields:function(){_.each(this.getVisibleParts(),function(t){t.validateFields()})},getVisibleParts:function(){return this.where({visible:!0})}});return e}),n("controllers/filters",["views/gutterLeft","views/gutterRight","models/partCollection"],function(t,e,n){var r=Marionette.Object.extend({initialize:function(){this.listenTo(i.channel("app"),"after:loadControllers",this.addFilters)},addFilters:function(){i.channel("formContentGutters").request("add:leftFilter",this.getLeftView,1,this),i.channel("formContentGutters").request("add:rightFilter",this.getRightView,1,this),i.channel("formContent").request("add:loadFilter",this.formContentLoad,1)},getLeftView:function(){return t},getRightView:function(){return e},formContentLoad:function(t){var e=new n(t);return console.log(e),i.channel("fields").request("get:collection")}});return r}),n("controllers/loadControllers",["controllers/filters"],function(t){var e=Marionette.Object.extend({initialize:function(){new t}});return e});var i=Backbone.Radio;e(["controllers/loadControllers"],function(t){var e=Marionette.Application.extend({initialize:function(t){this.listenTo(i.channel("app"),"after:appStart",this.afterStart)},onStart:function(){new t}}),n=new e;n.start()}),n("main",function(){})}();
//# sourceMappingURL=almond.build.js.map
//# sourceMappingURL=builder.js.map
